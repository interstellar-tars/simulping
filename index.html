<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulping | Roblox Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    header {
      background-color: #2a2a2a;
      padding: 20px;
      color: white;
      text-align: center;
    }
    header h1 {
      margin: 0;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      padding: 20px;
    }
    .panel {
      width: 280px;
      margin: 10px;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .panel img {
      width: 100%;
      border-radius: 50%;
    }
    .panel h2 {
      text-align: center;
      margin-top: 10px;
      color: #333;
    }
    .panel p {
      font-size: 14px;
      color: #555;
      margin: 10px 0;
    }
    .panel button {
      width: 100%;
      padding: 10px;
      background-color: #2a9d8f;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }
    .panel button:hover {
      background-color: #21867a;
    }
    .panel .info {
      margin-top: 15px;
    }
    .panel .info div {
      margin-bottom: 10px;
    }
    .panel .info strong {
      color: #333;
    }
  </style>
</head>
<body>

  <header>
    <h1>Simulping | Roblox Dashboard</h1>
  </header>

  <div class="container" id="results-container">
    <!-- Panels will be injected here -->
  </div>

  <script>
    // Function to fetch data from the Cloudflare Worker
    async function fetchData(type, identifier) {
      const response = await fetch(`https://simulping-api-worker.cubiodojo.workers.dev/${type}?${type}Id=${identifier}`);
      return await response.json();
    }

    // Function to display a user panel
    function createUserPanel(user) {
      const panel = document.createElement('div');
      panel.classList.add('panel');
      panel.innerHTML = `
        <img src="${user.avatarUrl}" alt="User Avatar">
        <h2>${user.username}</h2>
        <p>${user.description}</p>
        <div class="info">
          <div><strong>ID:</strong> ${user.id}</div>
          <div><strong>Username:</strong> ${user.username}</div>
        </div>
        <button onclick="fetchAndDisplay('user', '${user.username}')">Fetch User</button>
      `;
      return panel;
    }

    // Function to display a group panel
    function createGroupPanel(group) {
      const panel = document.createElement('div');
      panel.classList.add('panel');
      panel.innerHTML = `
        <h2>${group.name}</h2>
        <p>${group.description}</p>
        <div class="info">
          <div><strong>Group ID:</strong> ${group.id}</div>
          <div><strong>Member Count:</strong> ${group.memberCount}</div>
        </div>
        <button onclick="fetchAndDisplay('group', '${group.id}')">Fetch Group</button>
      `;
      return panel;
    }

    // Function to display a game panel
    function createGamePanel(game) {
      const panel = document.createElement('div');
      panel.classList.add('panel');
      panel.innerHTML = `
        <h2>${game.name}</h2>
        <p>${game.description}</p>
        <div class="info">
          <div><strong>Game ID:</strong> ${game.id}</div>
          <div><strong>Genre:</strong> ${game.genre}</div>
        </div>
        <button onclick="fetchAndDisplay('game', '${game.id}')">Fetch Game</button>
      `;
      return panel;
    }

    // Function to fetch and display user, group, or game data
    async function fetchAndDisplay(type, identifier) {
      const data = await fetchData(type, identifier);
      
      let panel;
      if (type === 'user') {
        panel = createUserPanel(data);
      } else if (type === 'group') {
        panel = createGroupPanel(data);
      } else if (type === 'game') {
        panel = createGamePanel(data);
      }

      const container = document.getElementById('results-container');
      container.innerHTML = ''; // Clear previous results
      container.appendChild(panel); // Add the new panel
    }

    // Initial call to display a sample user, group, and game
    fetchAndDisplay('user', 'LoveNorSad');
    fetchAndDisplay('group', '12345678'); // Example group ID
    fetchAndDisplay('game', '98765432'); // Example game ID
  </script>
</body>
</html>
